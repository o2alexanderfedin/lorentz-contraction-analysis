<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classic Lorentz Contraction - Moving Rod Thought Experiment</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: white;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            max-width: 1400px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            color: #333;
        }
        
        h1 {
            text-align: center;
            color: #764ba2;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        
        .visualization-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .frame-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .frame-title {
            color: #2d3748;
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
        }
        
        canvas {
            display: block;
            margin: 0 auto;
            border: 2px solid #ddd;
            border-radius: 5px;
            background: white;
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .control-group {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #4a5568;
        }
        
        .control-group input[type="range"] {
            width: 100%;
            margin-bottom: 5px;
        }
        
        .control-group .value {
            text-align: center;
            font-size: 1.2em;
            color: #764ba2;
            font-weight: bold;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: 600;
            width: 100%;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(118, 75, 162, 0.4);
        }
        
        .info-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .info-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            text-align: center;
        }
        
        .info-card h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .info-value {
            font-size: 2em;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 5px;
        }
        
        .info-label {
            color: #718096;
            font-size: 0.9em;
        }
        
        .formula-box {
            background: linear-gradient(135deg, #f0e6ff 0%, #e6f2ff 100%);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            border-left: 4px solid #764ba2;
        }
        
        .formula {
            font-size: 1.5em;
            color: #2d3748;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }
        
        .info-panel {
            background: linear-gradient(135deg, #f0e6ff 0%, #e6f2ff 100%);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #764ba2;
        }
        
        .info-panel h3 {
            color: #764ba2;
            margin-bottom: 10px;
        }
        
        .info-panel p {
            line-height: 1.6;
            color: #4a5568;
            margin-bottom: 10px;
        }
        
        .observer-indicator {
            position: absolute;
            background: #48bb78;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9em;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìè Classic Lorentz Interpretation</h1>
        <p class="subtitle">Standard Textbook Moving Rod Experiment</p>
        
        <div class="formula-box">
            <div class="formula">L = L‚ÇÄ √ó ‚àö(1 - v¬≤/c¬≤)</div>
            <div style="color: #718096; font-size: 0.9em;">
                L = contracted length, L‚ÇÄ = proper length, v = velocity, c = speed of light
            </div>
        </div>
        
        <div class="visualization-grid">
            <div class="frame-container">
                <h2 class="frame-title">üßç Rest Frame (Rod's Frame)</h2>
                <canvas id="restCanvas" width="600" height="300"></canvas>
            </div>
            <div class="frame-container">
                <h2 class="frame-title">üöÄ Moving Frame (Observer's Frame)</h2>
                <canvas id="movingCanvas" width="600" height="300"></canvas>
            </div>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <label for="velocity">Velocity (v/c)</label>
                <input type="range" id="velocity" min="0" max="0.99" value="0.6" step="0.01">
                <div class="value" id="velocityValue">0.60c</div>
            </div>
            
            <div class="control-group">
                <label for="properLength">Proper Length L‚ÇÄ (meters)</label>
                <input type="range" id="properLength" min="10" max="100" value="50" step="5">
                <div class="value" id="lengthValue">50 m</div>
            </div>
            
            <div class="control-group">
                <label for="showMeasurement">Measurement Method</label>
                <select id="measurementMethod" style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #cbd5e0;">
                    <option value="simultaneous">Simultaneous in Observer Frame</option>
                    <option value="endpoints">Track Endpoints</option>
                    <option value="lightclock">Light Clock Comparison</option>
                </select>
            </div>
            
            <div class="control-group">
                <button onclick="startAnimation()">‚ñ∂Ô∏è Animate Contraction</button>
            </div>
        </div>
        
        <div class="info-cards">
            <div class="info-card">
                <h3>Lorentz Factor Œ≥</h3>
                <div class="info-value" id="gammaValue">1.250</div>
                <div class="info-label">1/‚àö(1 - v¬≤/c¬≤)</div>
            </div>
            
            <div class="info-card">
                <h3>Contracted Length</h3>
                <div class="info-value" id="contractedValue">40.0 m</div>
                <div class="info-label">L = L‚ÇÄ/Œ≥</div>
            </div>
            
            <div class="info-card">
                <h3>Contraction Ratio</h3>
                <div class="info-value" id="ratioValue">80.0%</div>
                <div class="info-label">L/L‚ÇÄ</div>
            </div>
            
            <div class="info-card">
                <h3>Time Dilation</h3>
                <div class="info-value" id="dilationValue">125.0%</div>
                <div class="info-label">Œît' = Œ≥Œît</div>
            </div>
        </div>
        
        <div class="info-panel">
            <h3>üî¨ Standard Lorentz Interpretation</h3>
            <p>
                <strong>Classic Setup:</strong> A rod of proper length L‚ÇÄ moves at velocity v relative to an observer. 
                According to the standard interpretation, the rod physically contracts in the direction of motion.
            </p>
            <p>
                <strong>Key Principle:</strong> Length contraction occurs only in the direction of motion. 
                The rod's proper length L‚ÇÄ is measured in its rest frame. An observer seeing the rod 
                move at velocity v measures a contracted length L = L‚ÇÄ/Œ≥.
            </p>
            <p>
                <strong>Simultaneity:</strong> The contraction arises from the relativity of simultaneity. 
                The observer must measure both endpoints simultaneously in their frame, which corresponds 
                to different times in the rod's frame.
            </p>
            <p>
                <strong>Reciprocity:</strong> From the rod's perspective, the observer's measuring apparatus 
                is contracted. This apparent paradox is resolved by careful analysis of simultaneity and 
                measurement procedures.
            </p>
        </div>
    </div>
    
    <script>
        const restCanvas = document.getElementById('restCanvas');
        const restCtx = restCanvas.getContext('2d');
        const movingCanvas = document.getElementById('movingCanvas');
        const movingCtx = movingCanvas.getContext('2d');
        
        let animationId = null;
        let animationProgress = 0;
        let isAnimating = false;
        
        // Physics parameters
        let velocity = 0.6; // v/c
        let properLength = 50; // meters
        let pixelsPerMeter = 8;
        
        function calculateLorentzFactor(v) {
            return 1 / Math.sqrt(1 - v * v);
        }
        
        function drawRod(ctx, x, length, color, label, isMoving = false) {
            const y = 150;
            const height = 40;
            
            // Draw rod
            ctx.fillStyle = color;
            ctx.fillRect(x, y - height/2, length, height);
            
            // Draw endpoints
            ctx.strokeStyle = '#2d3748';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(x, y - height/2 - 10);
            ctx.lineTo(x, y + height/2 + 10);
            ctx.moveTo(x + length, y - height/2 - 10);
            ctx.lineTo(x + length, y + height/2 + 10);
            ctx.stroke();
            
            // Draw center marker
            ctx.fillStyle = '#2d3748';
            ctx.beginPath();
            ctx.arc(x + length/2, y, 5, 0, Math.PI * 2);
            ctx.fill();
            
            // Label
            ctx.fillStyle = '#2d3748';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(label, x + length/2, y - height/2 - 25);
            
            // Length indicator
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(x, y + height/2 + 25);
            ctx.lineTo(x + length, y + height/2 + 25);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Arrows
            ctx.beginPath();
            ctx.moveTo(x, y + height/2 + 25);
            ctx.lineTo(x + 10, y + height/2 + 20);
            ctx.moveTo(x, y + height/2 + 25);
            ctx.lineTo(x + 10, y + height/2 + 30);
            ctx.moveTo(x + length, y + height/2 + 25);
            ctx.lineTo(x + length - 10, y + height/2 + 20);
            ctx.moveTo(x + length, y + height/2 + 25);
            ctx.lineTo(x + length - 10, y + height/2 + 30);
            ctx.stroke();
            
            // Motion arrows if moving
            if (isMoving && velocity > 0) {
                ctx.strokeStyle = '#48bb78';
                ctx.lineWidth = 3;
                ctx.fillStyle = '#48bb78';
                
                for (let i = 0; i < 3; i++) {
                    const arrowX = x + length + 30 + i * 25;
                    ctx.beginPath();
                    ctx.moveTo(arrowX, y);
                    ctx.lineTo(arrowX + 15, y);
                    ctx.stroke();
                    
                    ctx.beginPath();
                    ctx.moveTo(arrowX + 15, y);
                    ctx.lineTo(arrowX + 10, y - 5);
                    ctx.lineTo(arrowX + 10, y + 5);
                    ctx.closePath();
                    ctx.fill();
                }
            }
        }
        
        function drawGrid(ctx, isMoving = false) {
            ctx.strokeStyle = '#e2e8f0';
            ctx.lineWidth = 1;
            
            // Vertical lines
            for (let x = 50; x <= 550; x += 50) {
                ctx.beginPath();
                ctx.moveTo(x, 50);
                ctx.lineTo(x, 250);
                ctx.stroke();
            }
            
            // Horizontal line (ground)
            ctx.strokeStyle = '#cbd5e0';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(30, 200);
            ctx.lineTo(570, 200);
            ctx.stroke();
            
            // Labels
            ctx.fillStyle = '#718096';
            ctx.font = '11px Arial';
            ctx.textAlign = 'center';
            for (let i = 0; i <= 10; i++) {
                const x = 50 + i * 50;
                ctx.fillText(`${i * 10}m`, x, 220);
            }
        }
        
        function drawMeasurementBeams(ctx, x1, x2) {
            const y = 150;
            
            ctx.strokeStyle = '#f56565';
            ctx.lineWidth = 2;
            ctx.setLineDash([8, 4]);
            ctx.globalAlpha = 0.6;
            
            // Vertical measurement beams
            ctx.beginPath();
            ctx.moveTo(x1, 30);
            ctx.lineTo(x1, 270);
            ctx.moveTo(x2, 30);
            ctx.lineTo(x2, 270);
            ctx.stroke();
            
            ctx.setLineDash([]);
            ctx.globalAlpha = 1;
            
            // Labels
            ctx.fillStyle = '#f56565';
            ctx.font = 'bold 12px Arial';
            ctx.fillText('t‚ÇÅ', x1, 25);
            ctx.fillText('t‚ÇÇ', x2, 25);
        }
        
        function updateDisplay() {
            const gamma = calculateLorentzFactor(velocity);
            const contractedLength = properLength / gamma;
            const ratio = contractedLength / properLength;
            
            // Update info cards
            document.getElementById('gammaValue').textContent = gamma.toFixed(3);
            document.getElementById('contractedValue').textContent = contractedLength.toFixed(1) + ' m';
            document.getElementById('ratioValue').textContent = (ratio * 100).toFixed(1) + '%';
            document.getElementById('dilationValue').textContent = (gamma * 100).toFixed(1) + '%';
            
            // Clear canvases
            restCtx.clearRect(0, 0, restCanvas.width, restCanvas.height);
            movingCtx.clearRect(0, 0, movingCanvas.width, movingCanvas.height);
            
            // Draw grids
            drawGrid(restCtx, false);
            drawGrid(movingCtx, true);
            
            // Draw rest frame
            const restX = 300 - (properLength * pixelsPerMeter) / 2;
            drawRod(restCtx, restX, properLength * pixelsPerMeter, '#4299e1', `L‚ÇÄ = ${properLength}m`, false);
            
            // Draw moving frame
            const movingX = 300 - (contractedLength * pixelsPerMeter) / 2;
            drawRod(movingCtx, movingX, contractedLength * pixelsPerMeter, '#e53e3e', 
                   `L = ${contractedLength.toFixed(1)}m`, true);
            
            // Draw measurement beams if simultaneous method selected
            const method = document.getElementById('measurementMethod').value;
            if (method === 'simultaneous') {
                drawMeasurementBeams(movingCtx, movingX, movingX + contractedLength * pixelsPerMeter);
            }
            
            // Observer indicators
            restCtx.fillStyle = '#48bb78';
            restCtx.font = 'bold 12px Arial';
            restCtx.fillText('üë§ Rod at rest', 300, 30);
            
            movingCtx.fillStyle = '#f56565';
            movingCtx.fillText('üë§ Observer sees rod moving at ' + (velocity * 100).toFixed(0) + '% c', 300, 30);
        }
        
        function animate() {
            if (!isAnimating) return;
            
            animationProgress += 0.01;
            if (animationProgress > 1) {
                animationProgress = 0;
            }
            
            // Keep velocity as user-controlled value (no automatic changes)
            const gamma = calculateLorentzFactor(velocity);
            const contractedLength = properLength / gamma;
            
            // Update info cards
            document.getElementById('gammaValue').textContent = gamma.toFixed(3);
            document.getElementById('contractedValue').textContent = contractedLength.toFixed(1) + ' m';
            document.getElementById('ratioValue').textContent = ((contractedLength / properLength) * 100).toFixed(1) + '%';
            document.getElementById('dilationValue').textContent = (gamma * 100).toFixed(1) + '%';
            
            // Clear and redraw rest frame (static)
            restCtx.clearRect(0, 0, restCanvas.width, restCanvas.height);
            drawGrid(restCtx, false);
            const restX = 300 - (properLength * pixelsPerMeter) / 2;
            drawRod(restCtx, restX, properLength * pixelsPerMeter, '#4299e1', `L‚ÇÄ = ${properLength}m`, false);
            restCtx.fillStyle = '#48bb78';
            restCtx.font = 'bold 12px Arial';
            restCtx.fillText('üë§ Rod at rest', 300, 30);
            
            // Animate moving frame - rod moves across screen
            movingCtx.clearRect(0, 0, movingCanvas.width, movingCanvas.height);
            drawGrid(movingCtx, true);
            
            const movingX = 50 + animationProgress * 400;
            
            // Draw moving rod at animated position
            drawRod(movingCtx, movingX, contractedLength * pixelsPerMeter, '#e53e3e', 
                   `L = ${contractedLength.toFixed(1)}m`, true);
            
            // Draw measurement beams if simultaneous method selected
            const method = document.getElementById('measurementMethod').value;
            if (method === 'simultaneous') {
                drawMeasurementBeams(movingCtx, movingX, movingX + contractedLength * pixelsPerMeter);
            }
            
            movingCtx.fillStyle = '#f56565';
            movingCtx.font = 'bold 12px Arial';
            movingCtx.fillText('üë§ Observer sees rod moving at ' + (velocity * 100).toFixed(0) + '% c', 300, 30);
            
            animationId = requestAnimationFrame(animate);
        }
        
        function startAnimation() {
            if (isAnimating) {
                isAnimating = false;
                cancelAnimationFrame(animationId);
                document.querySelector('button').textContent = '‚ñ∂Ô∏è Animate Contraction';
            } else {
                isAnimating = true;
                animate();
                document.querySelector('button').textContent = '‚è∏Ô∏è Stop Animation';
            }
        }
        
        // Event listeners
        document.getElementById('velocity').addEventListener('input', (e) => {
            velocity = parseFloat(e.target.value);
            document.getElementById('velocityValue').textContent = (velocity * 100).toFixed(0) + '% c';
            if (!isAnimating) updateDisplay();
        });
        
        document.getElementById('properLength').addEventListener('input', (e) => {
            properLength = parseFloat(e.target.value);
            document.getElementById('lengthValue').textContent = properLength + ' m';
            if (!isAnimating) updateDisplay();
        });
        
        document.getElementById('measurementMethod').addEventListener('change', () => {
            if (!isAnimating) updateDisplay();
        });
        
        // Initial display
        updateDisplay();
    </script>
</body>
</html>